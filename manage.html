<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage PG - Comfort Stays PG</title>
    <link rel="stylesheet" href="manage-styles.css">
    <link rel="icon" type="image/png" href="pg-logo.png">
</head>
<body>
    <div class="manage-container">
        <header class="manage-header">
            <div class="header-content">
                <div class="logo-section">
                    <img src="pg-logo.png" alt="Comfort Stays PG Logo" class="logo-img">
                    <h1>PG Management Dashboard</h1>
                </div>
                <div class="header-actions">
                    <button onclick="goBack()" class="btn-secondary">‚Üê Back to Website</button>
                    <button onclick="window.location.href='transactions.html'" class="btn-primary">üí≥ Transactions</button>
                    <button onclick="window.location.href='documents.html'" class="btn-primary">üìÑ Documents</button>
                    <button onclick="window.location.href='ac-management.html'" class="btn-primary">‚ùÑÔ∏è AC Management</button>
                    <button onclick="signOutUser()" class="btn-danger">üö™ Sign Out</button>
                </div>
            </div>
        </header>

        <main class="manage-main">
            <!-- Loading indicator -->
            <div id="loadingIndicator" class="loading-indicator">
                <div class="loading-spinner"></div>
                <p>Checking authentication...</p>
            </div>
            
            
            <!-- Deposit Summary -->
            <div class="deposit-summary" id="depositSummary" style="display: grid !important; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)) !important; gap: 24px !important; margin-bottom: 32px !important; padding: 0 16px !important; width: 100% !important; max-width: 1200px !important; margin-left: auto !important; margin-right: auto !important;">
                <div class="summary-card" style="background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important; border: 1px solid rgba(245, 158, 11, 0.2) !important; border-radius: 16px !important; padding: 24px !important; display: flex !important; align-items: center !important; gap: 20px !important; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08) !important; position: relative !important; overflow: hidden !important; min-height: 120px !important;">
                    <div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #f59e0b, #d97706);"></div>
                    <div class="summary-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706) !important; color: white !important; width: 70px !important; height: 70px !important; display: flex !important; align-items: center !important; justify-content: center !important; border-radius: 16px !important; font-size: 28px !important; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3) !important; flex-shrink: 0 !important;">üí∞</div>
                    <div class="summary-content" style="flex: 1 !important;">
                        <h3 style="margin: 0 0 8px 0 !important; font-size: 12px !important; font-weight: 700 !important; color: #64748b !important; text-transform: uppercase !important; letter-spacing: 1px !important;">Total Deposits</h3>
                        <div class="summary-amount" id="totalDeposits" style="font-size: 28px !important; font-weight: 800 !important; color: #1e293b !important; margin-bottom: 4px !important; line-height: 1 !important; background: linear-gradient(135deg, #1e293b, #f59e0b) !important; -webkit-background-clip: text !important; -webkit-text-fill-color: transparent !important; background-clip: text !important;">‚Çπ25,000</div>
                        <div class="summary-details" id="depositDetails" style="font-size: 13px !important; color: #64748b !important; font-weight: 500 !important; opacity: 0.8 !important;">3 occupants with deposits</div>
                    </div>
                </div>
                <div class="summary-card" style="background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important; border: 1px solid rgba(16, 185, 129, 0.2) !important; border-radius: 16px !important; padding: 24px !important; display: flex !important; align-items: center !important; gap: 20px !important; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08) !important; position: relative !important; overflow: hidden !important; min-height: 120px !important;">
                    <div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #10b981, #059669);"></div>
                    <div class="summary-icon" style="background: linear-gradient(135deg, #10b981, #059669) !important; color: white !important; width: 70px !important; height: 70px !important; display: flex !important; align-items: center !important; justify-content: center !important; border-radius: 16px !important; font-size: 28px !important; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3) !important; flex-shrink: 0 !important;">üè†</div>
                    <div class="summary-content" style="flex: 1 !important;">
                        <h3 style="margin: 0 0 8px 0 !important; font-size: 12px !important; font-weight: 700 !important; color: #64748b !important; text-transform: uppercase !important; letter-spacing: 1px !important;">Occupancy</h3>
                        <div class="summary-amount" id="occupancyCount" style="font-size: 28px !important; font-weight: 800 !important; color: #1e293b !important; margin-bottom: 4px !important; line-height: 1 !important; background: linear-gradient(135deg, #1e293b, #10b981) !important; -webkit-background-clip: text !important; -webkit-text-fill-color: transparent !important; background-clip: text !important;">5/17</div>
                        <div class="summary-details" id="occupancyDetails" style="font-size: 13px !important; color: #64748b !important; font-weight: 500 !important; opacity: 0.8 !important;">beds occupied</div>
                    </div>
                </div>
                <div class="summary-card" style="background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important; border: 1px solid rgba(139, 92, 246, 0.2) !important; border-radius: 16px !important; padding: 24px !important; display: flex !important; align-items: center !important; gap: 20px !important; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08) !important; position: relative !important; overflow: hidden !important; min-height: 120px !important;">
                    <div style="position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #8b5cf6, #7c3aed);"></div>
                    <div class="summary-icon" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed) !important; color: white !important; width: 70px !important; height: 70px !important; display: flex !important; align-items: center !important; justify-content: center !important; border-radius: 16px !important; font-size: 28px !important; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3) !important; flex-shrink: 0 !important;">üìä</div>
                    <div class="summary-content" style="flex: 1 !important;">
                        <h3 style="margin: 0 0 8px 0 !important; font-size: 12px !important; font-weight: 700 !important; color: #64748b !important; text-transform: uppercase !important; letter-spacing: 1px !important;">Monthly Revenue</h3>
                        <div class="summary-amount" id="monthlyRevenue" style="font-size: 28px !important; font-weight: 800 !important; color: #1e293b !important; margin-bottom: 4px !important; line-height: 1 !important; background: linear-gradient(135deg, #1e293b, #8b5cf6) !important; -webkit-background-clip: text !important; -webkit-text-fill-color: transparent !important; background-clip: text !important;">‚Çπ32,500</div>
                        <div class="summary-details" id="revenueDetails" style="font-size: 13px !important; color: #64748b !important; font-weight: 500 !important; opacity: 0.8 !important;">from current occupants</div>
                    </div>
                </div>
            </div>
            
            <div class="apartment-layout" id="apartmentLayout" style="display: none;">
                <div class="apartment-title">
                    <h2>Comfort Stays PG - Apartment Layout</h2>
                    <p>Click on beds to manage occupancy</p>
                </div>
                
                <!-- Bed Status Legend -->
                <div class="bed-legend">
                    <div class="legend-item legend-empty">
                        <div class="legend-dot"></div>
                        <span>Available</span>
                    </div>
                    <div class="legend-item legend-permanent">
                        <div class="legend-dot"></div>
                        <span>Permanent</span>
                    </div>
                    <div class="legend-item legend-temporary">
                        <div class="legend-dot"></div>
                        <span>Temporary</span>
                    </div>
                    <div class="legend-item legend-extended">
                        <div class="legend-dot"></div>
                        <span>Extended Stay</span>
                    </div>
                </div>
                
                <div class="apartment-container">
                    <!-- Left Half - Rooms -->
                    <div class="left-half">
                        <!-- Top Room (4 beds) -->
                        <div class="room top-room">
                            <div class="room-label">Room 3 (4 Beds)</div>
                            <div class="beds-container">
                                <div class="bed" data-room="room3" data-bed="1" onclick="handleBedClick(this)">
                                    <div class="bed-number">1</div>
                                    <div class="bed-info">
                                        <div class="occupant-name">Available</div>
                                        <div class="bed-price">‚Çπ6,500</div>
                                    </div>
                                </div>
                                <div class="bed" data-room="room3" data-bed="2" onclick="handleBedClick(this)">
                                    <div class="bed-number">2</div>
                                    <div class="bed-info">
                                        <div class="occupant-name">Available</div>
                                        <div class="bed-price">‚Çπ6,500</div>
                                    </div>
                                </div>
                                <div class="bed" data-room="room3" data-bed="3" onclick="handleBedClick(this)">
                                    <div class="bed-number">3</div>
                                    <div class="bed-info">
                                        <div class="occupant-name">Available</div>
                                        <div class="bed-price">‚Çπ6,500</div>
                                    </div>
                                </div>
                                <div class="bed" data-room="room3" data-bed="4" onclick="handleBedClick(this)">
                                    <div class="bed-number">4</div>
                                    <div class="bed-info">
                                        <div class="occupant-name">Available</div>
                                        <div class="bed-price">‚Çπ6,500</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Middle Room (3 beds) -->
                        <div class="room middle-room">
                            <div class="room-label">Room 2 (3 Beds)</div>
                            <div class="beds-container">
                                <div class="bed" data-room="room2" data-bed="1" onclick="handleBedClick(this)">
                                    <div class="bed-number">1</div>
                                    <div class="bed-info">
                                        <div class="occupant-name">Available</div>
                                        <div class="bed-price">‚Çπ6,500</div>
                                    </div>
                                </div>
                                <div class="bed" data-room="room2" data-bed="2" onclick="handleBedClick(this)">
                                    <div class="bed-number">2</div>
                                    <div class="bed-info">
                                        <div class="occupant-name">Available</div>
                                        <div class="bed-price">‚Çπ6,500</div>
                                    </div>
                                </div>
                                <div class="bed" data-room="room2" data-bed="3" onclick="handleBedClick(this)">
                                    <div class="bed-number">3</div>
                                    <div class="bed-info">
                                        <div class="occupant-name">Available</div>
                                        <div class="bed-price">‚Çπ6,500</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Bottom Room (4 beds) -->
                        <div class="room bottom-room">
                            <div class="room-label">Room 1 (4 Beds)</div>
                            <div class="beds-container">
                                <div class="bed" data-room="room1" data-bed="1" onclick="handleBedClick(this)">
                                    <div class="bed-number">1</div>
                                    <div class="bed-info">
                                        <div class="occupant-name">Available</div>
                                        <div class="bed-price">‚Çπ6,500</div>
                                    </div>
                                </div>
                                <div class="bed" data-room="room1" data-bed="2" onclick="handleBedClick(this)">
                                    <div class="bed-number">2</div>
                                    <div class="bed-info">
                                        <div class="occupant-name">Available</div>
                                        <div class="bed-price">‚Çπ6,500</div>
                                    </div>
                                </div>
                                <div class="bed" data-room="room1" data-bed="3" onclick="handleBedClick(this)">
                                    <div class="bed-number">3</div>
                                    <div class="bed-info">
                                        <div class="occupant-name">Available</div>
                                        <div class="bed-price">‚Çπ6,500</div>
                                    </div>
                                </div>
                                <div class="bed" data-room="room1" data-bed="4" onclick="handleBedClick(this)">
                                    <div class="bed-number">4</div>
                                    <div class="bed-info">
                                        <div class="occupant-name">Available</div>
                                        <div class="bed-price">‚Çπ6,500</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Half - Balcony, Kitchen, Hall -->
                    <div class="right-half">
                        <!-- Balcony -->
                        <div class="balcony">
                            <div class="room-label">Balcony</div>
                        </div>

                        <!-- Kitchen -->
                        <div class="kitchen">
                            <div class="room-label">Kitchen</div>
                        </div>

                        <!-- Hall (6 beds) -->
                        <div class="hall">
                            <div class="room-label">Hall (6 Beds)</div>
                            <div class="hall-beds">
                                <!-- Kitchen side beds -->
                                <div class="hall-side kitchen-side">
                                    <div class="bed" data-room="hall" data-bed="1" onclick="handleBedClick(this)">
                                        <div class="bed-number">1</div>
                                        <div class="bed-info">
                                            <div class="occupant-name">Available</div>
                                            <div class="bed-price">‚Çπ6,500</div>
                                        </div>
                                    </div>
                                    <div class="bed" data-room="hall" data-bed="2" onclick="handleBedClick(this)">
                                        <div class="bed-number">2</div>
                                        <div class="bed-info">
                                            <div class="occupant-name">Available</div>
                                            <div class="bed-price">‚Çπ6,500</div>
                                        </div>
                                    </div>
                                    <div class="bed" data-room="hall" data-bed="3" onclick="handleBedClick(this)">
                                        <div class="bed-number">3</div>
                                        <div class="bed-info">
                                            <div class="occupant-name">Available</div>
                                            <div class="bed-price">‚Çπ6,500</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Left side beds -->
                                <div class="hall-side left-side">
                                    <div class="bed" data-room="hall" data-bed="4" onclick="handleBedClick(this)">
                                        <div class="bed-number">4</div>
                                        <div class="bed-info">
                                            <div class="occupant-name">Available</div>
                                            <div class="bed-price">‚Çπ6,500</div>
                                        </div>
                                    </div>
                                    <div class="bed" data-room="hall" data-bed="5" onclick="handleBedClick(this)">
                                        <div class="bed-number">5</div>
                                        <div class="bed-info">
                                            <div class="occupant-name">Available</div>
                                            <div class="bed-price">‚Çπ6,500</div>
                                        </div>
                                    </div>
                                    <div class="bed" data-room="hall" data-bed="6" onclick="handleBedClick(this)">
                                        <div class="bed-number">6</div>
                                        <div class="bed-info">
                                            <div class="occupant-name">Available</div>
                                            <div class="bed-price">‚Çπ6,500</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Door -->
                            <div class="door">
                                <div class="door-label">Main Door</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Timeline/Calendar Section -->
    <div class="timeline-section">
        <div class="timeline-header">
            <h3>Bed Occupancy Timeline</h3>
            <div class="timeline-controls">
                <div class="timeline-toggle">
                    <label class="toggle-switch">
                        <input type="checkbox" id="hidePermanentToggle" onchange="togglePermanentRows()">
                        <span class="toggle-slider"></span>
                    </label>
                    <span class="toggle-label">Hide Full-Width Permanent</span>
                </div>
                <div class="timeline-navigation">
                    <button onclick="navigateTimeline('prev')" class="btn-nav">‚Üê Previous Day</button>
                    <div class="date-range-selector">
                        <label for="startDate">From:</label>
                        <input type="date" id="startDate" name="startDate">
                        <label for="endDate">To:</label>
                        <input type="date" id="endDate" name="endDate">
                        <button onclick="updateTimeline()" class="btn-primary">Update Timeline</button>
                    </div>
                    <button onclick="navigateTimeline('next')" class="btn-nav">Next Day ‚Üí</button>
                </div>
            </div>
        </div>
        
        <div class="timeline-container">
            <div class="timeline-legend">
                <div class="legend-item">
                    <div class="legend-dot permanent"></div>
                    <span>Permanent</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot temporary"></div>
                    <span>Temporary</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot extended"></div>
                    <span>Extended Stay</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot empty"></div>
                    <span>Available</span>
                </div>
            </div>
            
            <div class="timeline-content" id="timelineContent">
                <!-- Timeline bars will be generated here -->
            </div>
        </div>
    </div>

    <!-- Bed Management Modal -->
    <div id="bedModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Bed Management</h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Content will be dynamically loaded -->
            </div>
        </div>
    </div>

    <!-- Shared Authentication Module -->
    <script src="shared-auth.js"></script>
    
    <script src="manage-script.js"></script>
</body>
</html>
